# 掌上爱众 Home Assistant 集成
# 本集成由AI参与生成
## 简介
本集成是为 Home Assistant 设计的，用于与“掌上爱众”服务进行交互，获取水、气余额以及水停供信息。用户可以通过配置手机号码和密码，实现自动登录并定期更新相关数据。

## 功能特性
- **水、气余额查询**：可以实时获取各个账户的水、气余额信息。
- **水停供信息监测**：监测水停供相关信息，包括停供类型、开始时间、结束时间、原因和范围。
- **定期数据更新**：每小时自动更新一次数据，确保信息的及时性。
  
![微信截图_20250430210858](https://github.com/user-attachments/assets/cdc8045e-4ca1-4e99-b20e-074d617f7fe1)

![微信截图_20250430210936](https://github.com/user-attachments/assets/50ab10fa-14a4-46b0-8dac-dc14eb16e257)

## 安装
1. **手动安装**
    - 将 `zhangshang_aizhong` 文件夹复制到 Home Assistant 的 `custom_components` 目录下。
    - 重启 Home Assistant。
2. **HACS 安装（推荐）** 
   1. 确保你已经在 Home Assistant 中安装并配置了 HACS（Home Assistant Community Store）。
   2. 点击 HACS 界面左上角的菜单，选择 `自定义仓库（Custom repositories）`，在弹出的窗口中输入仓库地址 `https://github.com/hlhk2017/homeassistant-unicom_bill_info`，类别选择 `集成`，然后点击 ` 
      添加`。之后再搜索 `联通话费信息` 即可找到。
   3. 选择 `联通话费信息` 集成，点击 `下载此存储库`。
   4. 下载完成后，重启 Home Assistant。
## 配置
### 配置流方式（推荐）
1. 打开 Home Assistant 的前端界面。
2. 点击侧边栏的“配置” -> “设备与服务”。
3. 点击页面底部的“添加集成”按钮，在搜索框中输入“掌上爱众”，选择该集成。
4. 在弹出的表单中输入手机号码和密码，然后点击“提交”。


## 实体信息
集成会为每个账户创建以下传感器实体：
- **水余额**：显示当前账户的水余额，单位为元。
- **气余额**：显示当前账户的气余额，单位为元。
- **水停供信息**：显示水停供信息的数量，单位为条。点击实体可以查看详细的停供信息，包括停供类型、开始时间、结束时间、原因和范围。（需要修改代码中的位置ID）

## 注意事项
- 请确保你的手机号码和密码正确，否则可能无法正常登录“掌上爱众”服务。
- 数据更新间隔为每小时一次，如果你需要更频繁的更新，可以修改 `__init__.py` 文件中的 `SCAN_INTERVAL` 变量。
- 如果在使用过程中遇到问题，可以查看 Home Assistant 的日志文件，以获取更多详细信息。

## 贡献
如果你发现了任何问题或有改进的建议，欢迎提交 issue 或 pull request。

## 许可
本项目遵循 [GPL3.0 许可证]。
